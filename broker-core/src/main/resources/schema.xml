<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sbe:messageSchema xmlns:sbe="http://www.fixprotocol.org/ns/simple/RC3"
	package="org.camunda.tngp.taskqueue.data" id="2" version="1"
	semanticVersion="0.1.0" description="Task Queue Data Schema" byteOrder="littleEndian">

	<types>
		<composite name="messageHeader"
			description="Message identifiers and length of message root">
			<type name="blockLength" primitiveType="uint16" />
			<type name="templateId" primitiveType="uint16" />
			<type name="schemaId" primitiveType="uint16" />
			<type name="version" primitiveType="uint16" />
			<type name="resourceId" primitiveType="uint16" />
			<type name="shardId" primitiveType="uint16" />
		</composite>
		<composite name="bpmnEventHeader">
            <type name="event" primitiveType="uint16" />
            <type name="bpmnElementType" primitiveType="uint16" />
            <type name="schemaId" primitiveType="uint16" />
        </composite>
		<composite name="varDataEncoding">
			<type name="length" primitiveType="uint16" />
			<type name="varData" primitiveType="uint8" length="0"
				characterEncoding="UTF-8" />
		</composite>
		<composite name="groupSizeEncoding" description="Repeating group dimensions">
			<type name="blockLength" primitiveType="uint16" />
			<type name="numInGroup" primitiveType="uint8" semanticType="NumInGroup" />
		</composite>
	</types>

	<types>
		<enum name="TaskInstanceState" encodingType="uint8">
			<validValue name="NEW">0</validValue>
			<validValue name="LOCKED">1</validValue>
			<validValue name="COMPLETED">2</validValue>
		</enum>
		<enum name="WorkflowInstanceEventType" encodingType="uint8">
			<validValue name="NEW">0</validValue>
			<validValue name="ACTIVE">1</validValue>
			<validValue name="COMPLETED">2</validValue>
		</enum>
		<enum name="AvtivityInstanceEventType" encodingType="uint8">
			<validValue name="NEW">0</validValue>
			<validValue name="ACTIVE">1</validValue>
			<validValue name="COMPLETED">2</validValue>
		</enum>
		<type name="Date" primitiveType="uint64" semanticType="Date"/>
	</types>

	<sbe:message name="TaskInstance" id="1" description="A task Instance">
		<field name="id" id="1" type="uint64" />
		<field name="version" id="2" type="uint16" />
		<field name="prevVersionPosition" id="2" type="uint64" />
		<field name="state" id="3" type="TaskInstanceState" />
		<field name="lockTime" id="4" type="uint64" />
		<field name="lockOwnerId" id="5" type="uint32" />
		<field name="taskTypeHash" id="6" type="uint32" />
		<field name="wfRuntimeResourceId" id="7" type="uint16" />
		<field name="wfActivityInstanceEventKey" id="8" type="uint64" />
		<data name="taskType" id="7" type="varDataEncoding" />
		<data name="payload" id="8" type="varDataEncoding" />
	</sbe:message>
	
	<sbe:message name="WfType" id="2" description="A Workflow Type">
		<field name="id" id="1" type="uint64" />
		<field name="version" id="2" type="uint16" />
		<field name="prevVersionPosition" id="3" type="uint64" />
		<data name="typeKey" id="4" type="varDataEncoding" />
		<data name="resource" id="5" type="varDataEncoding" />
	</sbe:message>
    
    <sbe:message name="BpmnProcessEvent" id="4">
        <field name="key" id="1" type="uint64" />
        <field name="event" id="2" type="uint16" />
        <field name="processId" id="3" type="uint64" />
        <field name="processInstanceId" id="4" type="uint64" />
        <field name="initialElementId" id="5" type="uint16" />
    </sbe:message>
    
    <sbe:message name="BpmnFlowElementEvent" id="5">
        <field name="key" id="1" type="uint64" />
        <field name="event" id="2" type="uint16" />
        <field name="processId" id="3" type="uint64" />
        <field name="processInstanceId" id="4" type="uint64" />
        <field name="flowElementId" id="5" type="uint16" />
    </sbe:message>
    
    <sbe:message name="BpmnActivityEvent" id="6">
        <field name="key" id="1" type="uint64" />
        <field name="event" id="2" type="uint16" />
        <field name="processId" id="3" type="uint64" />
        <field name="processInstanceId" id="4" type="uint64" />
        <field name="flowElementId" id="5" type="uint16" />
        <field name="taskQueueId" id="6" type="uint16" />
        <data name="taskType" id="7" type="varDataEncoding" />
    </sbe:message>
    
</sbe:messageSchema>